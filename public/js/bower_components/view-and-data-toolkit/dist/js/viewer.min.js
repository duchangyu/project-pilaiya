AutodeskNamespace("Autodesk.ADN.Toolkit.Viewer"),Autodesk.ADN.Toolkit.Viewer.ViewerFactory=function(e,t){function n(e){return e.indexOf("http:")>-1||e.indexOf("https:")>-1}function i(){var e=(new Date).getTime(),t="xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t}function o(e,t,n){return e&&e.hasOwnProperty(t)?e[t]:n}function r(){var i={env:o(t,"environment","AutodeskProduction")};if(n(e)){var r=function(){var t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);var n=JSON.parse(t.responseText);return n.access_token};i.getAccessToken=r,i.refreshToken=r}else i.accessToken=e;return i}function a(){var e=r();Autodesk.Viewing.Initializer(e,function(){s=!0,l&&l()})}function u(e){var t=i(),n=document.createElement("div");return n.id=t,n.style.height="100%",e.appendChild(n),n.addEventListener("contextmenu",function(e){e.preventDefault()}),n.addEventListener("mouseover",function(){var e=window.scrollX,t=window.scrollY;window.onscroll=function(){window.scrollTo(e,t)}}),n.addEventListener("mouseout",function(){window.onscroll=null}),n}var s=!1,l=null;this.onInitialized=function(e){s?e():l=e},this.getViewablePath=function(e,t,n){return s?(0!==e.indexOf("urn:")&&(e="urn:"+e),void Autodesk.Viewing.Document.load(e,function(e){for(var n={path2d:[],path3d:[]},i=Autodesk.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry",role:"2d"},!0),o=0;o<i.length;++o)n.path2d.push({name:i[o].name,path:e.getViewablePath(i[o])});for(var r=Autodesk.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry",role:"3d"},!0),o=0;o<r.length;++o)n.path3d.push({name:r[o].name,path:e.getViewablePath(r[o])});t(n)},function(e){n(e)})):void n({error:"Factory not initialized. Need to subscribe to onInitialized callback"})},this.createViewer=function(e,t){var n=null,i=u(e);switch(o(t,"viewerType","GuiViewer3D")){case"GuiViewer3D":n=new Autodesk.Viewing.Private.GuiViewer3D(i);break;case"Viewer3D":n=new Autodesk.Viewing.Viewer3D(i);break;default:console.log("Warning: viewerType not specified or incorrect in config, using Viewer3D"),console.log("Valid values: {Viewer3D, GuiViewer3D}"),n=new Autodesk.Viewing.Viewer3D(i)}n.start(),n.setProgressiveRendering(o(t,"progressiveRendering",!0));var r=o(t,"qualityLevel",[!0,!0]);n.setQualityLevel(r[0],r[1]),n.impl.setLightPreset(o(t,"lightPreset",8));var a=o(t,"backgroundColor",[3,4,5,250,250,250]);return n.setBackgroundColor(a[0],a[1],a[2],a[3],a[4],a[5]),n.setDefaultNavigationTool(o(t,"navigationTool","freeorbit")),n.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function(){n.fitToView(!1)}),n},a()};